---
import AuthLayout from "@/layouts/AuthLayout.astro";
import RegisterForm from "@/components/auth/RegisterForm";
import { isFeatureEnabled } from "@/features/flags";

export const prerender = false;

// Check if user is already logged in - redirect to dashboard
if (Astro.locals.user) {
  return Astro.redirect("/dashboard");
}

// Check if auth feature is enabled
if (!isFeatureEnabled("auth")) {
  return Astro.redirect("/");
}
---

<AuthLayout title="Rejestracja">
  <RegisterForm client:load />
</AuthLayout>
